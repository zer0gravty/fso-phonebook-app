{"version":3,"sources":["components/Filter.js","components/Person.js","components/People.js","components/AddPerson.js","components/Banner.js","services/phonebook.js","App.js","index.js"],"names":["FilterForm","filterBy","action","value","onChange","Person","name","number","deletePerson","onClick","People","phonebook","map","id","AddPersonForm","submit","newName","newNumber","setNewName","setNewNumber","onSubmit","event","target","type","Banner","statusCode","includes","className","style","backgroundColor","baseUrl","phonebookService","getAll","axios","get","then","response","data","remove","delete","create","person","post","update","put","App","useState","persons","setPersons","setFilterBy","setStatusCode","useEffect","currentPhonebook","catch","e","console","log","displayBanner","code","duration","setTimeout","filteredBook","filter","toLowerCase","startsWith","Filter","AddPerson","preventDefault","personObj","foundPerson","find","window","confirm","updatedPerson","error","status","newPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5e36cc52.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst FilterForm = ({ filterBy, action }) => {\r\n    return (\r\n        <div>\r\n            filter shown with: <input value={filterBy} onChange={action} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilterForm;","import React from 'react';\r\n\r\nconst Person = ( {name, number, deletePerson} ) => {\r\n    return (   \r\n        <p>{name} {number} <button onClick={deletePerson}>Delete</button></p>\r\n    )\r\n}\r\n\r\nexport default Person;","import React from 'react';\r\nimport Person from './Person';\r\n\r\nconst People = ({ phonebook, deletePerson }) => {\r\n    return (\r\n        <div>\r\n            <h2>Numbers</h2>\r\n            <div>\r\n                { phonebook.map( ({ id, name, number }) => <Person key={id} name={name} number={number} deletePerson={() => deletePerson(id)}/> ) }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default People;","import React from 'react';\r\n\r\nconst AddPersonForm = ( { submit, newName, newNumber, setNewName, setNewNumber } ) => {\r\n    return (\r\n        <div>\r\n            <h3>add a new</h3>\r\n            <form onSubmit={submit}>\r\n                <div>\r\n                    name: <input value={newName} onChange={(event) => setNewName(event.target.value)} />\r\n                </div>\r\n                <div>\r\n                    number: <input value={newNumber} onChange={(event) => setNewNumber(event.target.value)} />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddPersonForm;","import React from 'react'\r\n\r\nconst Banner = ({ statusCode }) => {\r\n    const successCreate = 'Person successfully added.';\r\n    const successUpdate = 'Person successfully updated.';\r\n    const successDelete = 'Person successfully deleted.';\r\n    const errorGeneric = 'Error processing request.';\r\n    const errorInput = 'Name must be at least 3 characters and number at least 8 characters.'\r\n    \r\n    if ([200, 201, 204].includes(statusCode)) {\r\n        return (\r\n            <div className='banner' style={{ backgroundColor: 'green' }}>\r\n                { statusCode === 201\r\n                    ? successCreate\r\n                    : statusCode === 200\r\n                        ? successUpdate\r\n                        : successDelete }\r\n            </div>\r\n        )\r\n    } else if (statusCode === 400) {\r\n        return (\r\n            <div className='banner' style={{ backgroundColor: 'red' }}>\r\n                {errorInput}\r\n            </div>\r\n        )\r\n    };\r\n\r\n    if (statusCode > 400 && statusCode <= 599) {\r\n        return (\r\n            <div className='banner' style={{ backgroundColor: 'red' }}>\r\n                {errorGeneric}\r\n            </div>\r\n        )\r\n    };\r\n}\r\n\r\nexport default Banner;","import axios from 'axios';\r\n\r\nconst baseUrl = '/api/persons/';\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then(response => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n    return request.then(response => response.data);\r\n};\r\n\r\nconst create = (person) => {\r\n    const request = axios.post(baseUrl, person);\r\n    return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, person) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, person);\r\n    return request.then(response => response.data);\r\n};\r\n\r\nconst phonebookService = { getAll, remove, create, update };\r\n\r\nexport default phonebookService;\r\n","import React, { useState, useEffect } from 'react';\r\nimport FilterForm from './components/Filter';\r\nimport People from './components/People';\r\nimport AddPersonForm from './components/AddPerson';\r\nimport Banner from './components/Banner';\r\nimport './components/Banner.css';\r\nimport phonebookService from './services/phonebook';\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState('');\r\n  const [newNumber, setNewNumber] = useState('');\r\n  const [filterBy, setFilterBy] = useState('');\r\n  const [statusCode, setStatusCode] = useState(null);\r\n\r\n  useEffect( () => {\r\n    phonebookService\r\n      .getAll()\r\n      .then(currentPhonebook => setPersons(currentPhonebook))\r\n      .catch( e => {\r\n        console.log(`Error fetching data from database:\\n\\t${e}`);\r\n      })\r\n  }, [statusCode])\r\n\r\n  const displayBanner = (code, duration) => {\r\n    setStatusCode(code);\r\n    setTimeout( () => {\r\n      setStatusCode(null);\r\n    }, duration);\r\n  };\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    const personObj = { name: newName, number: newNumber };\r\n    const foundPerson = persons.find( person => person.name === newName);\r\n    if (foundPerson) {\r\n      if (window.confirm(`${personObj.name} is already added to the phonebook; replace the old number with a new one?`)) {\r\n        phonebookService\r\n          .update(foundPerson.id, {...foundPerson, number: newNumber})\r\n          .then( updatedPerson => {\r\n            displayBanner(200, 5000);\r\n          })\r\n          .catch(error => {\r\n            console.log(`Error updating person's number:\\n\\t${error}`);\r\n            displayBanner(error.response.status, 3000);\r\n          });\r\n      }\r\n    } else {\r\n      phonebookService\r\n        .create(personObj)\r\n        .then( newPerson => {\r\n          displayBanner(201, 5000);\r\n        })\r\n        .catch(error => {\r\n          console.log(`There was an error in adding the person:\\n\\t${error}`);\r\n          displayBanner(error.response.status, 3000);\r\n        });\r\n    }\r\n\r\n    setNewName('');\r\n    setNewNumber('');\r\n  };\r\n\r\n  const deletePerson = (id) => {\r\n    const person = persons.find( person => person.id === id);\r\n    const confirmed = window.confirm(`Are you sure you want to delete ${person.name}?`);\r\n    if(confirmed) {\r\n      phonebookService\r\n        .remove(person.id)\r\n        .then(() => {\r\n          setStatusCode(204);\r\n        })\r\n        .catch(error => {\r\n          console.log(`Error deleting person with id ${id}:\\n\\t${error}`);\r\n          displayBanner(error.response.status, 5000);\r\n        });\r\n    }\r\n  }\r\n\r\n  const filterPhonebook = (event) => {\r\n    setFilterBy(event.target.value);\r\n  }\r\n\r\n  const filteredBook = filterBy\r\n    ? persons.filter( ({name}) => name.toLowerCase().startsWith(filterBy.toLowerCase()) )\r\n    : persons;\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      {statusCode && <Banner statusCode={statusCode} />}\r\n      <FilterForm filterBy={filterBy} action={filterPhonebook} />\r\n      <AddPersonForm submit={addPerson} setNewName={setNewName} setNewNumber={setNewNumber} newName={newName} newNumber={newNumber} />\r\n      <People phonebook={filteredBook} deletePerson={deletePerson} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}