{"version":3,"sources":["components/Filter.js","components/Person.js","components/People.js","components/AddPerson.js","components/Banner.js","services/phonebook.js","App.js","index.js"],"names":["FilterForm","filterBy","action","value","onChange","Person","name","number","deletePerson","onClick","People","phonebook","map","id","AddPersonForm","submit","newName","newNumber","setNewName","setNewNumber","onSubmit","event","target","type","Banner","statusCode","className","style","backgroundColor","baseUrl","phonebookService","getAll","axios","get","then","response","data","remove","delete","create","person","post","update","put","App","useState","persons","setPersons","setFilterBy","setStatusCode","useEffect","currentPhonebook","catch","e","console","log","displayBanner","code","duration","setTimeout","filteredBook","filter","toLowerCase","startsWith","Filter","AddPerson","preventDefault","newId","Date","now","personObj","foundPerson","find","window","confirm","updatedPerson","newPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5e26bcdd.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst FilterForm = ({ filterBy, action }) => {\r\n    return (\r\n        <div>\r\n            filter shown with: <input value={filterBy} onChange={action} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilterForm;","import React from 'react';\r\n\r\nconst Person = ( {name, number, deletePerson} ) => {\r\n    return (   \r\n        <p>{name} {number} <button onClick={deletePerson}>Delete</button></p>\r\n    )\r\n}\r\n\r\nexport default Person;","import React from 'react';\r\nimport Person from './Person';\r\n\r\nconst People = ({ phonebook, deletePerson }) => {\r\n    return (\r\n        <div>\r\n            <h2>Numbers</h2>\r\n            <div>\r\n                { phonebook.map( ({ id, name, number }) => <Person key={id} name={name} number={number} deletePerson={() => deletePerson(id)}/> ) }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default People;","import React from 'react';\r\n\r\nconst AddPersonForm = ( { submit, newName, newNumber, setNewName, setNewNumber } ) => {\r\n    return (\r\n        <div>\r\n            <h3>add a new</h3>\r\n            <form onSubmit={submit}>\r\n                <div>\r\n                    name: <input value={newName} onChange={(event) => setNewName(event.target.value)} />\r\n                </div>\r\n                <div>\r\n                    number: <input value={newNumber} onChange={(event) => setNewNumber(event.target.value)} />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddPersonForm;","import React from 'react'\r\n\r\nconst Banner = ({ statusCode }) => {\r\n    const success = 'Person successfully added.';\r\n    const error = 'Error processing request.';\r\n    const deletionError = 'Person has already been removed. Refreshing data.';\r\n    \r\n    if (statusCode >= 200 && statusCode <= 299) {\r\n        return (\r\n            <div className='banner' style={{ backgroundColor: 'green' }}>\r\n                {success}\r\n            </div>\r\n    \r\n        )\r\n    };\r\n\r\n    if (statusCode === 404) {\r\n        return (\r\n            <div className='banner' style={{ backgroundColor: 'red' }}>\r\n                {deletionError}\r\n            </div>\r\n        )\r\n    };\r\n\r\n    if (statusCode >= 300 && statusCode <= 599) {\r\n        return (\r\n            <div className='banner' style={{ backgroundColor: 'red' }}>\r\n                {error}\r\n            </div>\r\n        )\r\n    };\r\n}\r\n\r\nexport default Banner;","import axios from 'axios';\r\n\r\nconst baseUrl = '/api/persons/';\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then(response => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n    return request.then(response => response.data);\r\n};\r\n\r\nconst create = (person) => {\r\n    const request = axios.post(baseUrl, person);\r\n    return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, person) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, person);\r\n    return request.then(response => response.data);\r\n};\r\n\r\nconst phonebookService = { getAll, remove, create, update };\r\n\r\nexport default phonebookService;\r\n","import React, { useState, useEffect } from 'react';\r\nimport FilterForm from './components/Filter';\r\nimport People from './components/People';\r\nimport AddPersonForm from './components/AddPerson';\r\nimport Banner from './components/Banner';\r\nimport './components/Banner.css';\r\nimport phonebookService from './services/phonebook';\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState('');\r\n  const [newNumber, setNewNumber] = useState('');\r\n  const [filterBy, setFilterBy] = useState('');\r\n  const [statusCode, setStatusCode] = useState(null);\r\n\r\n  useEffect( () => {\r\n    phonebookService\r\n      .getAll()\r\n      .then(currentPhonebook => setPersons(currentPhonebook))\r\n      .catch( e => {\r\n        console.log(`Error fetching data from database:\\n\\t${e}`);\r\n      })\r\n  }, [statusCode])\r\n\r\n  const displayBanner = (code, duration) => {\r\n    setStatusCode(code);\r\n    setTimeout( () => {\r\n      setStatusCode(null);\r\n    }, duration);\r\n  };\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    const newId = Date.now();\r\n    const personObj = { name: newName, number: newNumber, id: newId };\r\n    const foundPerson = persons.find( person => person.name === newName);\r\n    if (foundPerson) {\r\n      if (window.confirm(`${personObj.name} is already added to the phonebook; replace the old number with a new one?`)) {\r\n        phonebookService\r\n          .update(foundPerson.id, {...foundPerson, number: newNumber})\r\n          .then( updatedPerson => {\r\n            displayBanner(201, 5000);\r\n            setPersons(persons.map( person => person.id !==  foundPerson.id ? person : updatedPerson) );\r\n          })\r\n          .catch( e => {\r\n            console.log(`Error updating person's number:\\n\\t${e}`);\r\n            displayBanner(404, 5000);\r\n          });\r\n      }\r\n    } else {\r\n      phonebookService\r\n        .create(personObj)\r\n        .then( newPerson => {\r\n          displayBanner(201, 5000);\r\n          setPersons(persons.concat(newPerson));\r\n        })\r\n        .catch( e => {\r\n          console.log(`There was an error in adding the person:\\n\\t${e}`);\r\n          displayBanner(500, 5000);\r\n        });\r\n    }\r\n\r\n    setNewName('');\r\n    setNewNumber('');\r\n  };\r\n\r\n  const deletePerson = (id) => {\r\n    const person = persons.find( person => person.id === id);\r\n    const confirmed = window.confirm(`Are you sure you want to delete ${person.name}?`);\r\n    if(confirmed) {\r\n      phonebookService\r\n        .remove(person.id)\r\n        .then( () => {\r\n          setPersons(persons.filter( person => person.id !== id));\r\n        })\r\n        .catch( e => {\r\n          displayBanner(404, 5000);\r\n          console.log(`Error deleting person with id ${id}:\\n\\t${e}`);\r\n        });\r\n    }\r\n  }\r\n\r\n  const filterPhonebook = (event) => {\r\n    setFilterBy(event.target.value);\r\n  }\r\n\r\n  const filteredBook = filterBy\r\n    ? persons.filter( ({name}) => name.toLowerCase().startsWith(filterBy.toLowerCase()) )\r\n    : persons;\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      {statusCode && <Banner statusCode={statusCode} />}\r\n      <FilterForm filterBy={filterBy} action={filterPhonebook} />\r\n      <AddPersonForm submit={addPerson} setNewName={setNewName} setNewNumber={setNewNumber} newName={newName} newNumber={newNumber} />\r\n      <People phonebook={filteredBook} deletePerson={deletePerson} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}